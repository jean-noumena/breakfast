openapi: 3.0.1
info:
  title: breakfast
  version: "1.0"
servers:
- url: http://localhost:12000
security:
- jwt: []
paths:
  /npl/breakfast/-/openapi.json:
    get:
      operationId: _getOpenAPI
      responses:
        "200":
          description: The OpenAPI spec
          content:
            application/json:
              schema:
                type: object
      security: []
  /npl/breakfast/BreakfastEvent/:
    get:
      operationId: _getBreakfastEventList
      parameters:
      - name: page
        in: query
        required: false
        schema:
          minimum: 1
          type: integer
      - name: pageSize
        in: query
        required: false
        schema:
          maximum: 100
          minimum: 1
          type: integer
          default: 25
      - name: includeCount
        in: query
        description: "Include `totalItems` and `totalPages` in the response if set.\
          \ This option is very expensive, so should be avoided when possible."
        required: false
        schema:
          type: boolean
          default: false
      - name: sort
        in: query
        description: "Sort the protocol list by the given type. Possible values are\
          \ [created, modified]. Requires `order` parameter to be set."
        required: false
        schema:
          type: string
      - name: order
        in: query
        description: Return search results in the given order. Possible values are
          'asc' and 'desc'. Requires `sort` parameter to be set.
        required: false
        schema:
          type: string
      - name: state
        in: query
        description: "Filter protocols whose current state is one of the provided\
          \ values. May be repeated: e.g. ?state=active&state=paused"
        required: false
        explode: true
        schema:
          type: array
          items:
            type: string
      - name: modifiedAfter
        in: query
        description: Filter protocols modified after the given timestamp (inclusive).
          The timestamp must be in ISO-8601 format.
        required: false
        schema:
          type: string
          format: date-time
      - name: modifiedBefore
        in: query
        description: Filter protocols modified before the given timestamp (inclusive).
          The timestamp must be in ISO-8601 format.
        required: false
        schema:
          type: string
          format: date-time
      - name: createdAfter
        in: query
        description: Filter protocols created after the given timestamp (inclusive).
          The timestamp must be in ISO-8601 format.
        required: false
        schema:
          type: string
          format: date-time
      - name: createdBefore
        in: query
        description: Filter protocols created before the given timestamp (inclusive).
          The timestamp must be in ISO-8601 format.
        required: false
        schema:
          type: string
          format: date-time
      - $ref: "#/components/parameters/API_Version"
      - $ref: "#/components/parameters/NPL_Tag"
      responses:
        "200":
          description: All accessible protocol instances of this type
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BreakfastEvent_List"
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"
        "500":
          $ref: "#/components/responses/500"
    post:
      operationId: _createBreakfastEvent
      parameters:
      - $ref: "#/components/parameters/API_Version"
      - $ref: "#/components/parameters/NPL_Tag"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/BreakfastEvent_Create"
        required: true
      responses:
        "200":
          description: The new protocol instance
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BreakfastEvent"
        "204":
          description: No Content
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"
        "500":
          $ref: "#/components/responses/500"
  /npl/breakfast/BreakfastEvent/{id}/:
    get:
      operationId: _getBreakfastEventByID
      parameters:
      - $ref: "#/components/parameters/ProtocolID"
      - $ref: "#/components/parameters/API_Version"
      - $ref: "#/components/parameters/NPL_Tag"
      responses:
        "200":
          description: The protocol instance with this ID
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BreakfastEvent"
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"
        "404":
          $ref: "#/components/responses/404"
        "500":
          $ref: "#/components/responses/500"
  /npl/breakfast/BreakfastEvent/{id}/register:
    post:
      operationId: BreakfastEvent_register
      parameters:
      - $ref: "#/components/parameters/ProtocolID"
      - $ref: "#/components/parameters/API_Version"
      - $ref: "#/components/parameters/NPL_Tag"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/BreakfastEvent_Register_Command"
        required: true
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                type: object
                additionalProperties: false
                description: Unit
                nullable: false
        "204":
          description: No Content
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"
        "403":
          $ref: "#/components/responses/403"
        "404":
          $ref: "#/components/responses/404"
        "500":
          $ref: "#/components/responses/500"
  /npl/breakfast/BreakfastEvent/{id}/unregister:
    post:
      operationId: BreakfastEvent_unregister
      parameters:
      - $ref: "#/components/parameters/ProtocolID"
      - $ref: "#/components/parameters/API_Version"
      - $ref: "#/components/parameters/NPL_Tag"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/BreakfastEvent_Unregister_Command"
        required: true
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                type: object
                additionalProperties: false
                description: Unit
                nullable: false
        "204":
          description: No Content
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"
        "403":
          $ref: "#/components/responses/403"
        "404":
          $ref: "#/components/responses/404"
        "500":
          $ref: "#/components/responses/500"
  /npl/breakfast/BreakfastEvent/{id}/complete:
    post:
      operationId: BreakfastEvent_complete
      parameters:
      - $ref: "#/components/parameters/ProtocolID"
      - $ref: "#/components/parameters/API_Version"
      - $ref: "#/components/parameters/NPL_Tag"
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                type: object
                additionalProperties: false
                description: Unit
                nullable: false
        "204":
          description: No Content
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"
        "403":
          $ref: "#/components/responses/403"
        "404":
          $ref: "#/components/responses/404"
        "500":
          $ref: "#/components/responses/500"
  /npl/breakfast/BreakfastEvent/{id}/cancel:
    post:
      operationId: BreakfastEvent_cancel
      parameters:
      - $ref: "#/components/parameters/ProtocolID"
      - $ref: "#/components/parameters/API_Version"
      - $ref: "#/components/parameters/NPL_Tag"
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                type: object
                additionalProperties: false
                description: Unit
                nullable: false
        "204":
          description: No Content
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"
        "403":
          $ref: "#/components/responses/403"
        "404":
          $ref: "#/components/responses/404"
        "500":
          $ref: "#/components/responses/500"
  /npl/breakfast/BreakfastEvent/{id}/getRegistrations:
    post:
      operationId: BreakfastEvent_getRegistrations
      parameters:
      - $ref: "#/components/parameters/ProtocolID"
      - $ref: "#/components/parameters/API_Version"
      - $ref: "#/components/parameters/NPL_Tag"
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Registration"
        "204":
          description: No Content
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"
        "403":
          $ref: "#/components/responses/403"
        "404":
          $ref: "#/components/responses/404"
        "500":
          $ref: "#/components/responses/500"
  /npl/breakfast/BreakfastEvent/{id}/getRegistrationCount:
    post:
      operationId: BreakfastEvent_getRegistrationCount
      parameters:
      - $ref: "#/components/parameters/ProtocolID"
      - $ref: "#/components/parameters/API_Version"
      - $ref: "#/components/parameters/NPL_Tag"
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                type: number
        "204":
          description: No Content
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"
        "403":
          $ref: "#/components/responses/403"
        "404":
          $ref: "#/components/responses/404"
        "500":
          $ref: "#/components/responses/500"
  /npl/breakfast/Participant/:
    get:
      operationId: _getParticipantList
      parameters:
      - name: page
        in: query
        required: false
        schema:
          minimum: 1
          type: integer
      - name: pageSize
        in: query
        required: false
        schema:
          maximum: 100
          minimum: 1
          type: integer
          default: 25
      - name: includeCount
        in: query
        description: "Include `totalItems` and `totalPages` in the response if set.\
          \ This option is very expensive, so should be avoided when possible."
        required: false
        schema:
          type: boolean
          default: false
      - name: sort
        in: query
        description: "Sort the protocol list by the given type. Possible values are\
          \ [created, modified]. Requires `order` parameter to be set."
        required: false
        schema:
          type: string
      - name: order
        in: query
        description: Return search results in the given order. Possible values are
          'asc' and 'desc'. Requires `sort` parameter to be set.
        required: false
        schema:
          type: string
      - name: state
        in: query
        description: "Filter protocols whose current state is one of the provided\
          \ values. May be repeated: e.g. ?state=active&state=paused"
        required: false
        explode: true
        schema:
          type: array
          items:
            type: string
      - name: modifiedAfter
        in: query
        description: Filter protocols modified after the given timestamp (inclusive).
          The timestamp must be in ISO-8601 format.
        required: false
        schema:
          type: string
          format: date-time
      - name: modifiedBefore
        in: query
        description: Filter protocols modified before the given timestamp (inclusive).
          The timestamp must be in ISO-8601 format.
        required: false
        schema:
          type: string
          format: date-time
      - name: createdAfter
        in: query
        description: Filter protocols created after the given timestamp (inclusive).
          The timestamp must be in ISO-8601 format.
        required: false
        schema:
          type: string
          format: date-time
      - name: createdBefore
        in: query
        description: Filter protocols created before the given timestamp (inclusive).
          The timestamp must be in ISO-8601 format.
        required: false
        schema:
          type: string
          format: date-time
      - $ref: "#/components/parameters/API_Version"
      - $ref: "#/components/parameters/NPL_Tag"
      responses:
        "200":
          description: All accessible protocol instances of this type
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Participant_List"
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"
        "500":
          $ref: "#/components/responses/500"
    post:
      operationId: _createParticipant
      parameters:
      - $ref: "#/components/parameters/API_Version"
      - $ref: "#/components/parameters/NPL_Tag"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Participant_Create"
        required: true
      responses:
        "200":
          description: The new protocol instance
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Participant"
        "204":
          description: No Content
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"
        "500":
          $ref: "#/components/responses/500"
  /npl/breakfast/Participant/{id}/:
    get:
      operationId: _getParticipantByID
      parameters:
      - $ref: "#/components/parameters/ProtocolID"
      - $ref: "#/components/parameters/API_Version"
      - $ref: "#/components/parameters/NPL_Tag"
      responses:
        "200":
          description: The protocol instance with this ID
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Participant"
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"
        "404":
          $ref: "#/components/responses/404"
        "500":
          $ref: "#/components/responses/500"
  /npl/breakfast/Participant/{id}/updateName:
    post:
      operationId: Participant_updateName
      parameters:
      - $ref: "#/components/parameters/ProtocolID"
      - $ref: "#/components/parameters/API_Version"
      - $ref: "#/components/parameters/NPL_Tag"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Participant_UpdateName_Command"
        required: true
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                type: object
                additionalProperties: false
                description: Unit
                nullable: false
        "204":
          description: No Content
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"
        "403":
          $ref: "#/components/responses/403"
        "404":
          $ref: "#/components/responses/404"
        "500":
          $ref: "#/components/responses/500"
  /npl/breakfast/Participant/{id}/registerForEvent:
    post:
      operationId: Participant_registerForEvent
      parameters:
      - $ref: "#/components/parameters/ProtocolID"
      - $ref: "#/components/parameters/API_Version"
      - $ref: "#/components/parameters/NPL_Tag"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Participant_RegisterForEvent_Command"
        required: true
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                type: object
                additionalProperties: false
                description: Unit
                nullable: false
        "204":
          description: No Content
        "400":
          $ref: "#/components/responses/400"
        "401":
          $ref: "#/components/responses/401"
        "403":
          $ref: "#/components/responses/403"
        "404":
          $ref: "#/components/responses/404"
        "500":
          $ref: "#/components/responses/500"
components:
  schemas:
    _Party:
      required:
      - claims
      type: object
      properties:
        claims:
          type: object
          additionalProperties:
            type: array
            items:
              type: string
      example:
        claims:
          preferred_email:
          - john.doe@example.com
    _Period:
      required:
      - days
      - months
      - weeks
      - years
      type: object
      properties:
        days:
          type: integer
        weeks:
          type: integer
        months:
          type: integer
        years:
          type: integer
    _Error:
      type: object
      properties:
        errorType:
          type: string
        id:
          type: string
          format: uuid
        idType:
          type: string
        message:
          type: string
        error:
          type: string
          nullable: true
        origin:
          type: object
          properties:
            value:
              type: string
            code:
              type: integer
              format: int32
            originType:
              type: string
            id:
              type: string
            message:
              type: string
          nullable: true
        stackTrace:
          type: string
          nullable: true
        clientStackTrace:
          type: array
          nullable: true
          items:
            type: object
            properties:
              name:
                type: string
              protocolId:
                type: string
                format: uuid
                nullable: true
              elementType:
                type: string
              location:
                type: object
                properties:
                  file:
                    type: string
                  line:
                    type: integer
                    format: int32
                  sourceRef:
                    type: object
                    properties:
                      path:
                        type: string
                      commit:
                        type: string
                    nullable: true
            nullable: true
    BreakfastEvent_Reference:
      type: string
      format: uuid
    Participant_Reference:
      type: string
      format: uuid
    Registration:
      required:
      - participant
      - registeredAt
      type: object
      properties:
        participant:
          $ref: "#/components/schemas/Participant_Reference"
        registeredAt:
          type: string
          format: zoned-date-time
          example: "2006-01-02T15:04:05.999+01:00[Europe/Zurich]"
    BreakfastEvent:
      required:
      - '@actions'
      - '@id'
      - '@parties'
      - '@state'
      - eventDate
      type: object
      properties:
        '@id':
          type: string
          format: uuid
        '@parties':
          $ref: "#/components/schemas/BreakfastEvent_Parties"
        '@actions':
          $ref: "#/components/schemas/BreakfastEvent_Actions"
        '@state':
          $ref: "#/components/schemas/BreakfastEvent_States"
        eventDate:
          type: string
          format: date
      readOnly: true
    BreakfastEvent_Parties:
      required:
      - everyone
      - organizer
      type: object
      properties:
        organizer:
          $ref: "#/components/schemas/_Party"
        everyone:
          $ref: "#/components/schemas/_Party"
    BreakfastEvent_Actions:
      type: object
      properties:
        register:
          type: string
          format: uri
          example: http://localhost:12000/npl/breakfast/BreakfastEvent/1ee39a43-8e4e-4b3b-8f1f-1e11ad495436/register
        unregister:
          type: string
          format: uri
          example: http://localhost:12000/npl/breakfast/BreakfastEvent/1ee39a43-8e4e-4b3b-8f1f-1e11ad495436/unregister
        complete:
          type: string
          format: uri
          example: http://localhost:12000/npl/breakfast/BreakfastEvent/1ee39a43-8e4e-4b3b-8f1f-1e11ad495436/complete
        cancel:
          type: string
          format: uri
          example: http://localhost:12000/npl/breakfast/BreakfastEvent/1ee39a43-8e4e-4b3b-8f1f-1e11ad495436/cancel
        getRegistrations:
          type: string
          format: uri
          example: http://localhost:12000/npl/breakfast/BreakfastEvent/1ee39a43-8e4e-4b3b-8f1f-1e11ad495436/getRegistrations
        getRegistrationCount:
          type: string
          format: uri
          example: http://localhost:12000/npl/breakfast/BreakfastEvent/1ee39a43-8e4e-4b3b-8f1f-1e11ad495436/getRegistrationCount
    BreakfastEvent_List:
      required:
      - items
      type: object
      properties:
        '@prev':
          type: string
          format: uri
          example: http://localhost:12000/npl/breakfast/BreakfastEvent/?page=1&pageSize=10
        '@next':
          type: string
          format: uri
          example: http://localhost:12000/npl/breakfast/BreakfastEvent/?page=3&pageSize=10
        items:
          type: array
          items:
            $ref: "#/components/schemas/BreakfastEvent"
        page:
          type: integer
        totalItems:
          type: integer
          description: Total number of accessible protocol instances. Only included
            if the `includeCount` query parameter was set.
          nullable: true
        totalPages:
          type: integer
          description: Total number of accessible pages. Only included if the `includeCount`
            query parameter was set.
          nullable: true
    BreakfastEvent_Create:
      required:
      - '@parties'
      type: object
      properties:
        '@parties':
          $ref: "#/components/schemas/BreakfastEvent_Parties"
    BreakfastEvent_States:
      type: string
      enum:
      - open
      - completed
      - cancelled
    BreakfastEvent_Register_Command:
      required:
      - participant
      type: object
      properties:
        participant:
          $ref: "#/components/schemas/Participant_Reference"
    BreakfastEvent_Unregister_Command:
      required:
      - participant
      type: object
      properties:
        participant:
          $ref: "#/components/schemas/Participant_Reference"
    Participant:
      required:
      - '@actions'
      - '@id'
      - '@parties'
      - name
      type: object
      properties:
        '@id':
          type: string
          format: uuid
        '@parties':
          $ref: "#/components/schemas/Participant_Parties"
        '@actions':
          $ref: "#/components/schemas/Participant_Actions"
        name:
          type: string
      readOnly: true
    Participant_Parties:
      required:
      - everyone
      - participant
      type: object
      properties:
        participant:
          $ref: "#/components/schemas/_Party"
        everyone:
          $ref: "#/components/schemas/_Party"
    Participant_Actions:
      type: object
      properties:
        updateName:
          type: string
          format: uri
          example: http://localhost:12000/npl/breakfast/Participant/1ee39a43-8e4e-4b3b-8f1f-1e11ad495436/updateName
        registerForEvent:
          type: string
          format: uri
          example: http://localhost:12000/npl/breakfast/Participant/1ee39a43-8e4e-4b3b-8f1f-1e11ad495436/registerForEvent
    Participant_List:
      required:
      - items
      type: object
      properties:
        '@prev':
          type: string
          format: uri
          example: http://localhost:12000/npl/breakfast/Participant/?page=1&pageSize=10
        '@next':
          type: string
          format: uri
          example: http://localhost:12000/npl/breakfast/Participant/?page=3&pageSize=10
        items:
          type: array
          items:
            $ref: "#/components/schemas/Participant"
        page:
          type: integer
        totalItems:
          type: integer
          description: Total number of accessible protocol instances. Only included
            if the `includeCount` query parameter was set.
          nullable: true
        totalPages:
          type: integer
          description: Total number of accessible pages. Only included if the `includeCount`
            query parameter was set.
          nullable: true
    Participant_Create:
      required:
      - '@parties'
      - name
      type: object
      properties:
        name:
          type: string
        '@parties':
          $ref: "#/components/schemas/Participant_Parties"
    Participant_UpdateName_Command:
      required:
      - newName
      type: object
      properties:
        newName:
          type: string
    Participant_RegisterForEvent_Command:
      required:
      - event
      type: object
      properties:
        event:
          $ref: "#/components/schemas/BreakfastEvent_Reference"
  responses:
    "400":
      description: Bad Request
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/_Error"
    "401":
      description: Unauthorized
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/_Error"
    "403":
      description: Forbidden
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/_Error"
    "404":
      description: Not Found
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/_Error"
    "500":
      description: Internal Server Error
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/_Error"
  parameters:
    API_Version:
      name: X-NPL-API
      in: header
      description: Optional parameter to require a specific API version
      required: false
      schema:
        type: string
    NPL_Tag:
      name: X-NPL-TAG
      in: header
      description: Optional parameter to require a specific NPL Tag
      required: false
      schema:
        type: string
    ProtocolID:
      name: id
      in: path
      required: true
      schema:
        type: string
        format: uuid
  securitySchemes:
    jwt:
      type: http
      scheme: bearer
      bearerFormat: JWT
